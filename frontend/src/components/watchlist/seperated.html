<div ng-controller="WatchlistCtrl as ctrl" class="md-padding">
  <div layout="row" layout-align="center center" class="md-padding" ng-if="ctrl.watchlist.loading">
    <md-whiteframe class="md-whiteframe-z5 whitebox">
      <md-toolbar class='md-small-tall'>
        <div class="md-toolbar-tools">
          <h1>
            {{'WATCHLIST' | translate}}
          </h1>
        </div>
      </md-toolbar>
      <md-list>
        <md-list-item layout="row" layout-align="center center">
          <md-progress-circular md-mode="indeterminate"></md-progress-circular>
        </md-list-item>
      </md-list>
    </md-whiteframe>
  </div>
  <div ng-repeat="project in ctrl.config.projectsSelected | projectList:ctrl.config" class="md-padding"
       layout="row" layout-align="center center" ng-if="(ctrl.watchlist.perProject[project] | watchlist:ctrl.config).length">
    <md-whiteframe class="md-whiteframe-z5" ng-class="(ctrl.config.oneline) ? 'whitebox-oneline' : 'whitebox'">
      <md-toolbar class='md-small-tall'>
        <div class="md-toolbar-tools">
          <h1>
            {{project}}
          </h1>
        </div>
      </md-toolbar>
      <md-list class="watchlist-container">
        <md-list-item layout="row" class="watchlist"
                      ng-class="ctrl.config.projectColors[event.project]"
                      ng-repeat="event in ctrl.watchlist.perProject[project] | watchlist:ctrl.config track by event.id">
          <watchlist-entry ng-click="ctrl.clicked(event)" md-ink-ripple></watchlist-entry>
          <md-divider></md-divider>
        </md-list-item>
      </md-list>
    </md-whiteframe>
  </div>
</div>
